// Lamina CAS åŠŸèƒ½æ€»ç»“æ¼”ç¤º
// æ–¹ç¨‹æ±‚è§£ã€è¡¨è¾¾å¼å­˜å‚¨ã€å¤åˆè¿ç®—ã€æ±‚å¯¼æ•°ã€ç‰¹å®šç‚¹æ±‚å€¼

print("=== Lamina CAS åŠŸèƒ½æ€»ç»“ ===");
print();

// 1. æ–¹ç¨‹æ±‚è§£æ¼”ç¤º
print("ğŸ“ æ–¹ç¨‹æ±‚è§£");
var eq1 = cas_parse("3*x + 9");  // 3x + 9 = 0
var eq2 = cas_parse("5*x - 15"); // 5x - 15 = 0  
var eq3 = cas_parse("x + 7");    // x + 7 = 0

print("æ–¹ç¨‹ 3x + 9 = 0 çš„è§£:", cas_solve_linear(eq1, "x"));
print("æ–¹ç¨‹ 5x - 15 = 0 çš„è§£:", cas_solve_linear(eq2, "x"));
print("æ–¹ç¨‹ x + 7 = 0 çš„è§£:", cas_solve_linear(eq3, "x"));

// éªŒè¯è§£
print("éªŒè¯: 3*(-3) + 9 =", cas_evaluate_at(eq1, "x", -3));
print("éªŒè¯: 5*(3) - 15 =", cas_evaluate_at(eq2, "x", 3));
print();

// 2. è¡¨è¾¾å¼å­˜å‚¨ç³»ç»Ÿ
print("ğŸ’¾ è¡¨è¾¾å¼å­˜å‚¨ç³»ç»Ÿ");
var complex_expr = cas_parse("x^3 + 2*x^2 + 3*x + 4");
cas_store("cubic", complex_expr);
cas_store("derivative", cas_differentiate(complex_expr, "x"));

print("å­˜å‚¨çš„ä¸‰æ¬¡å‡½æ•°:", cas_load("cubic"));
print("å­˜å‚¨çš„å¯¼æ•°:", cas_load("derivative"));
print();

// 3. å¤åˆè¿ç®—å®ä¾‹
print("ğŸ”— å¤åˆè¿ç®—å®ä¾‹");
var base_func = cas_parse("x^2 + 1");
var composite = cas_parse("x^2 * x + x");  // å¤åˆè¡¨è¾¾å¼

print("åŸºç¡€å‡½æ•°: f(x) = x^2 + 1");
print("å¤åˆå‡½æ•°: g(x) = x^3 + x");

var f_deriv = cas_differentiate(base_func, "x");
var g_deriv = cas_differentiate(composite, "x");

print("f'(x) =", f_deriv);
print("g'(x) =", g_deriv);
print();

// 4. æ±‚å¯¼æ•°åŠŸèƒ½å±•ç¤º
print("ğŸ“Š æ±‚å¯¼æ•°åŠŸèƒ½");
var test_functions = [
    "x^2",
    "x^3 + 2*x",
    "x^4 + x^2 + 1"
];

print("å‡½æ•° x^2 çš„å¯¼æ•°:", cas_differentiate(cas_parse("x^2"), "x"));
print("å‡½æ•° x^3 + 2*x çš„å¯¼æ•°:", cas_differentiate(cas_parse("x^3 + 2*x"), "x"));
print("å‡½æ•° x^4 + x^2 + 1 çš„å¯¼æ•°:", cas_differentiate(cas_parse("x^4 + x^2 + 1"), "x"));
print();

// 5. åœ¨ç‰¹å®šç‚¹æ±‚å€¼
print("ğŸ¯ ç‰¹å®šç‚¹æ±‚å€¼");
var polynomial = cas_parse("x^3 + x^2 + x + 1");
var poly_deriv = cas_differentiate(polynomial, "x");

print("å¤šé¡¹å¼: f(x) = x^3 + x^2 + x + 1");
print("å¯¼æ•°: f'(x) =", poly_deriv);

print("åœ¨å…³é”®ç‚¹çš„å€¼:");
print("x = 0: f(0) =", cas_evaluate_at(polynomial, "x", 0), ", f'(0) =", cas_evaluate_at(poly_deriv, "x", 0));
print("x = 1: f(1) =", cas_evaluate_at(polynomial, "x", 1), ", f'(1) =", cas_evaluate_at(poly_deriv, "x", 1));
print("x = -1: f(-1) =", cas_evaluate_at(polynomial, "x", -1), ", f'(-1) =", cas_evaluate_at(poly_deriv, "x", -1));
print("x = 2: f(2) =", cas_evaluate_at(polynomial, "x", 2), ", f'(2) =", cas_evaluate_at(poly_deriv, "x", 2));
print();

// 6. æ•°å€¼å¯¼æ•°éªŒè¯
print("ğŸ”¬ æ•°å€¼å¯¼æ•°éªŒè¯");
var test_expr = cas_parse("x^3 + 2*x^2");
var symbolic = cas_differentiate(test_expr, "x");

print("å‡½æ•°: x^3 + 2*x^2");
print("ç¬¦å·å¯¼æ•°:", symbolic);

var point = 1.5;
var symbolic_value = cas_evaluate_at(symbolic, "x", point);
var numerical_value = cas_numerical_derivative(test_expr, "x", point);

print("åœ¨ x =", point, "å¤„:");
print("ç¬¦å·å¯¼æ•°å€¼:", symbolic_value);
print("æ•°å€¼å¯¼æ•°å€¼:", numerical_value);
print("è¯¯å·®:", abs(symbolic_value - numerical_value));
print();

// 7. ç»¼åˆåº”ç”¨å®ä¾‹
print("ğŸš€ ç»¼åˆåº”ç”¨å®ä¾‹");
print("ç‰©ç†å­¦ä¸­çš„è¿åŠ¨æ–¹ç¨‹: s(t) = t^3 + 2*t^2 + t");

var position = cas_parse("t^3 + 2*t^2 + t");
var velocity = cas_differentiate(position, "t");
var acceleration = cas_differentiate(velocity, "t");

cas_store("position", position);
cas_store("velocity", velocity);
cas_store("acceleration", acceleration);

print("ä½ç½®: s(t) =", cas_load("position"));
print("é€Ÿåº¦: v(t) =", cas_load("velocity"));
print("åŠ é€Ÿåº¦: a(t) =", cas_load("acceleration"));

print("åœ¨ t = 2 ç§’æ—¶:");
print("ä½ç½® =", cas_evaluate_at(position, "t", 2), "ç±³");
print("é€Ÿåº¦ =", cas_evaluate_at(velocity, "t", 2), "ç±³/ç§’");
print("åŠ é€Ÿåº¦ =", cas_evaluate_at(acceleration, "t", 2), "ç±³/ç§’Â²");

print();
print("=== Lamina CAS ç³»ç»ŸåŠŸèƒ½å±•ç¤ºå®Œæˆ ===");
print("âœ… æ–¹ç¨‹æ±‚è§£   âœ… è¡¨è¾¾å¼å­˜å‚¨   âœ… å¤åˆè¿ç®—");
print("âœ… æ±‚å¯¼æ•°     âœ… ç‰¹å®šç‚¹æ±‚å€¼   âœ… æ•°å€¼éªŒè¯");
